<div class="separator">
  <h1 style="font-family: monospace;">Estudiante</h1>
  <button _ngcontent-yfb-c88="" class="volver-btn" (click)="volver()" class="btn btn-danger button_close" tabindex="0">
    <i _ngcontent-yfb-c88="" class="fas fa-long-arrow-alt-left"></i>
  </button>
</div>
<div class="container usuarios-container">
  <!-- Barra de búsqueda -->
  <div class="search-container">
    <mat-form-field appearance="outline" class="custom-search">
      <mat-icon matPrefix>search</mat-icon>
      <input matInput type="text" placeholder="Buscar por nombre o apellidos" [(ngModel)]="filtro"
        (input)="filtrarUsuarios()">
    </mat-form-field>
  </div>

  <!-- Filtros de sede y género -->
  <div class="filters-container">
    <mat-form-field appearance="outline" class="filter-field">
      <mat-label>Sedes</mat-label>
      <mat-select [(ngModel)]="sedeSeleccionada" (selectionChange)="filtrarUsuarios()">
        <mat-option value="">Todas las sedes</mat-option>
        <mat-option *ngFor="let sede of sedes" [value]="sede.nombre">
          {{ sede.nombre }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="filter-field">
      <mat-label>Género</mat-label>
      <mat-select [(ngModel)]="generoSeleccionado" (selectionChange)="filtrarUsuarios()">
        <mat-option value="">Todos los géneros</mat-option>
        <mat-option *ngFor="let genero of generos" [value]="genero.clave">
          {{ genero.descripcion1 }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Mensaje cuando no hay resultados -->
  <div *ngIf="usuariosFiltrados.length === 0" class="no-results">
    <mat-icon>search_off</mat-icon>
    <p>No se encontraron resultados</p>
  </div>

  <!-- Grid de usuarios -->
  <div class="row usuarios-grid g-4">
    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-12" *ngFor="let usuario of usuariosFiltrados">
      <div class="custom-card">
        <mat-card class="user-card">
          <div class="card-content-wrapper">
            <!-- Imagen de perfil -->
            <div class="user-avatar-wrapper">
              <img *ngIf="mostrarImagen(usuario)" [src]="mostrarImagen(usuario)" alt="Foto de perfil"
                class="user-avatar">
              <img *ngIf="!mostrarImagen(usuario)" src="assets/img/perfil.png" alt="Foto de perfil predeterminada"
                class="user-avatar">
            </div>

            <!-- Información del usuario -->
            <div class="user-info">
              <h3 class="user-name">
                {{ usuario.primerNombre }} {{ usuario.segundoNombre }}
                {{ usuario.apellidoPaterno }} {{ usuario.apellidoMaterno }}
              </h3>
              <button mat-stroked-button color="primary" class="detail-button" (click)="operar(usuario)">
                <mat-icon>visibility</mat-icon> Ver detalle
              </button>
            </div>
          </div>
        </mat-card>
      </div>
    </div>
  </div>
</div>