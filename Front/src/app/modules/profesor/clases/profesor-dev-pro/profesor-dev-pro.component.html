<div class="container">
    <div class="search-container">
        <mat-form-field appearance="outline" class="custom-search">
            <mat-icon matPrefix>search</mat-icon>
            <input 
                matInput 
                type="text" 
                placeholder="Buscar por nombre o apellidos" 
                [(ngModel)]="filtro"
                (input)="filtrarUsuarios()" 
            />
        </mat-form-field>
    </div>

    <!-- Si hay usuarios, muestra la lista -->

    <div *ngIf="usuariosFiltrados?.length > 0; else noUsuarios" class="row usuarios-grid g-4">
        <div class="row"></div>
        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-12" *ngFor="let usuario of usuariosFiltrados">
          <div class="custom-card">
            <mat-card class="user-card">
              <div class="card-content-wrapper">
                <!-- Imagen de perfil -->
                <div class="user-avatar-wrapper">
                  <img *ngIf="mostrarImagen(usuario)" [src]="mostrarImagen(usuario)" alt="Foto de perfil"
                    class="user-avatar">
                  <img *ngIf="!mostrarImagen(usuario)" src="assets/img/perfil.png" alt="Foto de perfil predeterminada"
                    class="user-avatar">
                </div>
    
                <!-- InformaciÃ³n del usuario -->
                <div class="user-info">
                  <h3 class="user-name">
                    {{ usuario.primerNombre }} {{ usuario.segundoNombre }}
                    {{ usuario.apellidoPaterno }} {{ usuario.apellidoMaterno }}
                  </h3>
                  <button mat-stroked-button color="primary" class="detail-button" (click)="operar(usuario)">
                    <mat-icon>visibility</mat-icon> Ver detalle
                  </button>
                </div>
              </div>
            </mat-card>
          </div>
        </div>
      </div>
    <!-- Mensaje cuando no hay usuarios -->
    <ng-template #noUsuarios>
        <div class="text-center mt-5 p-4">
            <mat-icon class="empty-icon">people_outline</mat-icon>
            <h3 class="mt-3">No se encontraron usuarios</h3>
            <p class="text-muted">
                {{ filtro ? 'Prueba con otro nombre o apellido.' : 'No hay usuarios registrados.' }}
            </p>
        </div>
    </ng-template>
</div>